{% extends 'base.html' %}
  {% load static %}

  {% block title %}å…¨åœ‹ç¨»ç±³åƒ¹æ ¼è¡Œæƒ…{% endblock %} 

  {% block content %}
  
  <style>
  h1 {
    text-align: center;
    color: #004d40;
    margin-bottom: 0.5rem;
  }
  .update {
    text-align: center;
    color: #666;
    margin-bottom: 1.5rem;
  }
  h2 {
    margin-top: 2rem;
    font-size: 1.1rem;
    font-weight: 600;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    background-color: #ffffff;
    font-size: 0.875rem;
  }
  th, td {
    border: 1px solid #dee2e6;
    padding: 0.5rem;
    text-align: center;
    white-space: nowrap;
  }
  thead th {
    background-color: #e0f2f1;
  }
  tr:nth-child(even) td {
    background-color: #fafafa;
  }
  .subhead {
    background-color: #dcedc8;
    font-weight: bold;
  }
  pre {
    background: #111;
    color: #cbd5e1;
    padding: 0.75rem;
    border-radius: 0.5rem;
    white-space: pre-wrap;
  }
  @media (max-width: 576px) {
    table {
      font-size: 0.75rem;
    }
    th, td {
      padding: 0.35rem;
    }
    h1 {
      font-size: 1.4rem;
    }
    h2 {
      font-size: 1.05rem;
    }
  }
  </style>

  <h1>å…¨åœ‹ç¨»ç±³åƒ¹æ ¼è¡Œæƒ…</h1>
{% if fetched_at %}
  <p class="update">è³‡æ–™æ›´æ–°æ™‚é–“ï¼š{{ fetched_at }}</p>
{% endif %}

{% if debug_info %}
  <pre>{{ debug_info|join:"\n" }}</pre>
{% endif %}

{% if day_tables %}
  {% for date, rows in day_tables %}
    <h2>ğŸ“… {{ date }}</h2>
    <div class="table-responsive mt-2">
    <table class="table table-bordered table-striped table-sm text-center align-middle">
      <thead>
        <tr class="subhead">
          <th rowspan="2">äº¤æ˜“æ—¥æœŸ</th>
          <th rowspan="2">å¸‚å ´</th>
          <th colspan="5">é›¶å”®ï¼ˆå…ƒ/å…¬æ–¤ï¼‰</th>
          <th colspan="5">èº‰å”®ï¼ˆå…ƒ/ç™¾å…¬æ–¤ï¼‰</th>
        </tr>
        <tr>
          <th>ç²³ç¨®ç™½ç±³</th>
          <th>ç¡¬ç§ˆç™½ç±³</th>
          <th>è»Ÿç§ˆç™½ç±³</th>
          <th>åœ“ç³¯ç™½ç±³</th>
          <th>é•·ç³¯ç™½ç±³</th>
          <th>ç²³ç¨®ç™½ç±³</th>
          <th>ç¡¬ç§ˆç™½ç±³</th>
          <th>è»Ÿç§ˆç™½ç±³</th>
          <th>åœ“ç³¯ç™½ç±³</th>
          <th>é•·ç³¯ç™½ç±³</th>
        </tr>
      </thead>
      <tbody>
        {% for r in rows %}
        <tr>
          <td>{{ date }}</td>
          <td>{{ r.å¸‚å ´ }}</td>
          <td>{{ r.é›¶å”®.ç²³ç¨®ç™½ç±³|default_if_none:"-" }}</td>
          <td>{{ r.é›¶å”®.ç¡¬ç§ˆç™½ç±³|default_if_none:"-" }}</td>
          <td>{{ r.é›¶å”®.è»Ÿç§ˆç™½ç±³|default_if_none:"-" }}</td>
          <td>{{ r.é›¶å”®.åœ“ç³¯ç™½ç±³|default_if_none:"-" }}</td>
          <td>{{ r.é›¶å”®.é•·ç³¯ç™½ç±³|default_if_none:"-" }}</td>
          <td>{{ r.èº‰å”®.ç²³ç¨®ç™½ç±³|default_if_none:"-" }}</td>
          <td>{{ r.èº‰å”®.ç¡¬ç§ˆç™½ç±³|default_if_none:"-" }}</td>
          <td>{{ r.èº‰å”®.è»Ÿç§ˆç™½ç±³|default_if_none:"-" }}</td>
          <td>{{ r.èº‰å”®.åœ“ç³¯ç™½ç±³|default_if_none:"-" }}</td>
          <td>{{ r.èº‰å”®.é•·ç³¯ç™½ç±³|default_if_none:"-" }}</td>
        </tr>
        {% endfor %}
      </tbody>
        </table>
  </div>
  {% endfor %}
{% else %}
  <p>ç›®å‰å°šç„¡è³‡æ–™ï¼Œè«‹å…ˆåŸ·è¡Œçˆ¬èŸ²ã€‚</p>
{% endif %}
  {% endblock %}
